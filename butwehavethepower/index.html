<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Union Strike Folk Song</title>
    <link rel="stylesheet" href="style.css" type="text/css" />
  </head>

  <body>
    <h1 id="title">Union Strike Folk Song</h1>

    <video
      src="https://www.cs.tufts.edu/comp/120/butwehavethepower.mp4"
      id="butwehavethepower"
      controls
    ></video>
    <div id="lyrics"></div>

    <script>
      // Complete this section and create a CSS file named style.css
      const video = document.getElementById("butwehavethepower");
      const lyricsDiv = document.getElementById("lyrics");

      const lyricsData = [
        { start: 4.18, end: 6.18, line: "Lisa:" },
        { start: 6.18, end: 8.58, line: "Come gather round, children," },
        { start: 8.58, end: 10.9, line: "It's high time ye learned" },
        { start: 10.9, end: 13.209, line: "'Bout a hero named Homer" },
        { start: 13.209, end: 16.079, line: "And a devil named Burns." },
        { start: 17.07, end: 18.7, line: "We'll march 'till we drop" },
        { start: 18.7, end: 21.5, line: "The girls and the fellas." },
        { start: 21.5, end: 23.54, line: "We'll fight 'till the death" },
        { start: 23.54, end: 26.06, line: "Or else fold like umbrellas." },

        { start: 38.16, end: 40.5, line: "So we'll march day and night" },
        { start: 40.56, end: 42.54, line: "By the big cooling tower." },
        { start: 42.54, end: 45.04, line: "They have the plant" },
        { start: 45.04, end: 49.74, line: "But we have the power." },

        { start: 50.94, end: 52.94, line: "Lenny:" },
        { start: 52.94, end: 54.4, line: 'Now do "Classical Gas!"' },

        { start: 70.75, end: 72.75, line: "Lisa:" },
        { start: 72.75, end: 75.3, line: "So we'll march day and night" },
        { start: 75.3, end: 77.87, line: "By the big cooling tower." },
        { start: 77.87, end: 79.69, line: "They have the plant" },
        { start: 79.69, end: 82.26, line: "But we have the power." },

        { start: 82.26, end: 84.2, line: "So we'll march day and night" },
        { start: 84.3, end: 87.04, line: "By the big cooling tower." },
        { start: 87.04, end: 89.05, line: "They have the plant" },
        { start: 89.05, end: 92.535, line: "But we have the power." },
      ];

      const between = (t, start, end) => t >= start && t < end;
      const getLine = (currentTime) => {
        for (const lyric of lyricsData)
          if (between(currentTime, lyric.start, lyric.end)) return lyric.line;
        return "";
      };
      const lineEl = document.createElement("p");
      lyricsDiv.append(lineEl);

      video.addEventListener("timeupdate", (event) => {
        const currentTime = video.currentTime;
        lineEl.innerHTML = getLine(currentTime);
      });
    </script>
  </body>
</html>
